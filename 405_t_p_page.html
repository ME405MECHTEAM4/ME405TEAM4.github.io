<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.3"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ME405TermProject: Term Project</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="Cal Poly ME logo.png"/></td>
  <td id="projectalign">
   <div id="projectname">ME405TermProject
   </div>
  </td>
    <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.svg"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.3 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('405_t_p_page.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Term Project </div></div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#section1">Files for Term Project</a></li>
<li class="level1"><a href="#section2">Hand Calculations</a></li>
<li class="level1"><a href="#section3">Finite State Machine Diagrams</a></li>
<li class="level1"><a href="#section4">Task Diagrams</a></li>
<li class="level1"><a href="#section5">Oscilliscope Images</a></li>
<li class="level1"><a href="#section6">Plots</a></li>
<li class="level1"><a href="#section7">Cad Models</a></li>
<li class="level1"><a href="#section8">Wiring Diagrams</a></li>
</ul>
</div>
<div class="textblock"><p >This Term Project was aimed to create a pen plotter using the nucleo microcontroller and TMC2208 and TMC4210 drivers. We decided on using a car that could drive to draw. Below are the major steps we took to create this project. These sections include the software and hardware we used to complete this car plotter.</p>
<h1><a class="anchor" id="section1"></a>
Files for Term Project</h1>
<p >Here are the links to all the complete file and details for the Term Project. <br  />
 File: <a class="el" href="main_8py.html">main.py</a> <br  />
 File: <a class="el" href="task__share_8py.html">task_share.py</a> <br  />
 File: <a class="el" href="cotask_8py.html">cotask.py</a> <br  />
 File: <a class="el" href="motor_8py.html">motor.py</a> <br  />
 File: <a class="el" href="_stepper_8py.html">Stepper.py</a> <br  />
 Repository File Link: <a href="https://github.com/ME405MECHTEAM4/ME405TEAM4.github.io/tree/main/_ALL_Term%20Project%20Code">https://github.com/ME405MECHTEAM4/ME405TEAM4.github.io/tree/main/_ALL_Term%20Project%20Code</a> <br  />
 Video Demonstration:</p>
<h1><a class="anchor" id="section2"></a>
Hand Calculations</h1>
<p >These images are the hand calculations used to interpret how far the car would need to move and the theta associated for the desired distance. There are turns and straight lines that each have their own theta's used and distance desired. <br  />
 </p><div class="image">
<img src="HC1.png" alt="" width="500px"/>
</div>
<p> <br  />
 Figure 1: Base equations for Calculations <br  />
 </p><div class="image">
<img src="HC2.png" alt="" width="500px"/>
</div>
<p> <br  />
 Figure 2: 7.5 Inch Straight Line Calculations <br  />
 </p><div class="image">
<img src="HC3.png" alt="" width="500px"/>
</div>
<p> <br  />
 Figure 3: Diagonal Line Calculations <br  />
 </p><div class="image">
<img src="HC4.png" alt="" width="500px"/>
</div>
<p> <br  />
 Figure 4: 90 Degree Turn Calculations <br  />
 </p><div class="image">
<img src="HC5.png" alt="" width="500px"/>
</div>
<p> <br  />
 Figure 5: 135 Degree Turn Calculations <br  />
</p>
<h1><a class="anchor" id="section3"></a>
Finite State Machine Diagrams</h1>
<p >These images contain the finite state machines of the main, motor, and parsing tasks. The first image is the FSM of the main task that shows the initialization the paths to the parse or motor. The second image is the FSM of the parse task which reads the code sent, seperates the values, reads the values, and then creates the steps based on the original sent code. The third image is the FSM of the motor task that recieves commands for the dc motor or target arrays for the stepper motors. <br  />
 </p><div class="image">
<img src="MainFSM.png" alt="" width="500px"/>
</div>
<p> <br  />
 Figure 6: Main FSM <br  />
 </p><div class="image">
<img src="ParseFSM.png" alt="" width="500px"/>
</div>
<p> <br  />
 Figure 7: Parse FSM <br  />
 </p><div class="image">
<img src="MotorFSM.png" alt="" width="500px"/>
</div>
<p> <br  />
 Figure 8: Motor FSM <br  />
</p>
<h1><a class="anchor" id="section4"></a>
Task Diagrams</h1>
<p >This image shows the task diagram of what values from main are passed into the motor and stepper files. <br  />
 </p><div class="image">
<img src="Task.png" alt="" width="500px"/>
</div>
<p> <br  />
 Figure 9: Task Diagram <br  />
</p>
<h1><a class="anchor" id="section5"></a>
Oscilliscope Images</h1>
<p >These image contains Oscilliscope Images captured in Lab. The first image below shows the clock signal capture operating at 20 MHz. The second image below shows the oscilloscope capture of entire SPI bus during one datagram Transfer Reading from TYPE_VERSION Register. nSC1 (yellow), SCK (green), MOSI (blue), MISO (red) </p><div class="image">
<img src="OS1.png" alt="" width="500px"/>
</div>
<p> <br  />
 Figure 10: Oscilliscope Capture of Clock Signal at 20 MHz <br  />
 </p><div class="image">
<img src="OS2.png" alt="" width="500px"/>
</div>
<p> <br  />
 Figure 11: Oscilliscope Capture of SPI bus <br  />
</p>
<h1><a class="anchor" id="section6"></a>
Plots</h1>
<p >These images are the plots produced for our code. The first image is the hpgl file we created in Inkscape to be sent to the microcontroller. This file is parsed and used to create the pattern shown in the second image. <br  />
 </p><div class="image">
<img src="hpgl.png" alt="" width="500px"/>
</div>
<p> <br  />
 Figure 12: HPGL file of pattern desired <br  />
 </p><div class="image">
<img src="SerialCarPlot.png" alt="" width="500px"/>
</div>
<p> <br  />
 Figure 13: Python generated plot of pattern desired made from HPGL file <br  />
</p>
<h1><a class="anchor" id="section7"></a>
Cad Models</h1>
<p >These images contain the models and drawings for our project. The first set of images are of the car body. This shows how the body was modeled as well as the dimensions of the overall body. The second set of images are of the pen holder we used to hold the pen in place. The third set of images show the wheel we attached directly to the stepper motors. <br  />
 </p><div class="image">
<img src="Car1.png" alt="" width="500px"/>
</div>
<p> <br  />
 Figure 14: Car CAD Model <br  />
 </p><div class="image">
<img src="Car2.png" alt="" width="500px"/>
</div>
<p> <br  />
 Figure 15: Car Drawing with dimensions <br  />
 </p><div class="image">
<img src="Pen1.png" alt="" width="500px"/>
</div>
<p> <br  />
 Figure 16: Pen holder CAD Model <br  />
 </p><div class="image">
<img src="Pen2.png" alt="" width="500px"/>
</div>
<p> <br  />
 Figure 17: Pen holder Drawing with Dimensions <br  />
 </p><div class="image">
<img src="W1.png" alt="" width="500px"/>
</div>
<p> <br  />
 Figure 18: Wheel CAD Model <br  />
 </p><div class="image">
<img src="W2.png" alt="" width="500px"/>
</div>
<p> <br  />
 Figure 19: Wheel Drawing with Dimensios <br  />
</p>
<h1><a class="anchor" id="section8"></a>
Wiring Diagrams</h1>
<p >These images show how the nucleo, shoe of brian, and the TMC's are connected physically. The first image shows the wiring diagram between Nucleo/Shoe of Brian to Motor Driver board to our Motors/power supply. The second image shows the wiring diagram between the dc motor, dc motor driver, power supply, and the nucleo. </p><div class="image">
<img src="MCU1.png" alt="" width="500px"/>
</div>
<p> <br  />
 Figure 20: Controller wiring for the stepper motors <br  />
 </p><div class="image">
<img src="MCU2.png" alt="" width="500px"/>
</div>
<p> <br  />
 Figure 21: Controller wiring for the dc motor <br  />
 </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.3 </li>
  </ul>
</div>
</body>
</html>
